<head>
  <script src="pomodoro.js"></script>
  <link rel="stylesheet" href="Styles.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>

<style>
  .form-range::-webkit-slider-thumb {
    background: red;
    background-color: red;
  }

  .form-range::-moz-range-thumb {
    background: red;
  }

  .form-range::-ms-thumb {
    background: red;
  }


  .form-range::-webkit-slider-thumb:active {
    background-color: red;
  }

  .form-range::-webkit-slider-thumb {
    background-color: red;
  }

  .form-range:focus::-webkit-slider-thumb {
    background-color: red;
  }

  .form-range:focus::-moz-range-thumb {
    background-color: red;
  }

  .form-range:focus::-ms-thumb {
    box-shadow: red;
  }
</style>

<body>
  <div class="row">
    <div class="col-1">
      <label for="timeRange" class="form-label"> Durata</label>
    </div>
    <div class="col-2">
      <div class="card">
        <div class="cardbody" id="display"></div>
      </div>
    </div>
    <input type="range" class="form-range" min="35" max="96" id="timeRange">

    <button type="button" class="btn" id="submit" onclick="test()">Submit</button>
    <div class="row">
      <div class="col-2">

      </div>
      <div class="col-2">
        <label for="cycles" class="form-label">Numero cicli</label>
        <input type="number" class="form-control" id="cycles">
      </div>
      <div class="col-2">
        <label for="studyDuration" class="form-label">Durata studio</label>
        <input type="number" class="form-control" id="studyDuration">
      </div>

      <div class="col-2">
        <label for="pauseDuration" class="form-label">Durata pausa</label>
        <input type="number" class="form-control" id="pauseDuration">
      </div>
      <div class="col-3 align-self-end">
        <div class="card">
          <div class="cardbody" id="finalTime"></div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-2">
        <!-- inserire link per tornare nella pagina precedente -->
        <a class="btn" href="#" id="btn" role="button">Back</a>
      </div>
      <div class="col-8">

      </div>
      <div align="right" class="col-2"> <button type="button-primary" id="btn" class="btn justify-end" onclick="next()">Next</button>
      </div>
    </div>
</body>

<script>

  let display = document.getElementById('display')
  let range = document.getElementById('timeRange')
  let cicli = document.getElementById('cycles')
  let studio = document.getElementById('studyDuration')
  let pausa = document.getElementById('pauseDuration')
  let time = document.getElementById('finalTime')

  function updateRange() {
    let val = parseInt(range.value)
    display.textContent = val * 5 + " minuti"
  }

  range.addEventListener('input', function () {
    updateRange()
  })
  window.addEventListener('load', function () {
    range.value = 35;
    updateRange()
    cicli.value = 5
    studio.value = 30
    pausa.value = 5
    update()
  })

  function update() {
    let c = cicli.value;
    let s = studio.value;
    let p = pausa.value;
    let t = parseInt(s) + parseInt(p)

    time.textContent = (c * t) + "minuti";
    updateRange();
  }

  cicli.addEventListener('input', function () {
    update()
  })

  studio.addEventListener('input', function () {
    update()
  })

  pausa.addEventListener('input', function () {
    update()
  })


  function next () {
    window.sessionStorage.setItem('cicli', cicli.value)
    window.sessionStorage.setItem('studio', studio.value)
    window.sessionStorage.setItem('pausa', pausa.value)
    alert(window.sessionStorage.getItem('cicli'))
    window.location.href = "../../Timer/index.html"
    
  }
</script>